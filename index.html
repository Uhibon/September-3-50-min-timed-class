<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>People at School â€“ Swipe Deck</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0077cc; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('Booha card.jpg') center/cover fixed no-repeat;
      backdrop-filter:saturate(110%);
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.85);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:700;letter-spacing:.2px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button,input[type="checkbox"]{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.1)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('Booha card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:52vh;margin:16px auto;padding:28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25)
    }
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));} .main{font-size:24px}}
    .tiny{font-size:12px}
    a{color:#0077cc;text-decoration:none}
    .hidden{display:none}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> People at School â€“ Swipe Deck</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: ğŸ‡¯ğŸ‡µ â†’ ğŸ‡¬ğŸ‡§</option>
          <option value="vocab-e2j">Vocab: ğŸ‡¬ğŸ‡§ â†’ ğŸ‡¯ğŸ‡µ</option>
          <option value="sentences">Sentences</option>
          <option value="qa">Q & A</option>
        </select>
        <button id="btnPrev" title="â† or swipe right">â—€ï¸ Prev</button>
        <button id="btnFlip" title="Tap / Space">Flip</button>
        <button id="btnNext" title="â†’ or swipe left">Next â–¶ï¸</button>
        <button id="btnShuffle" title="Shuffle deck">Shuffle</button>
        <label class="pill"><input type="checkbox" id="showHira" /> Show Simple Japanese</label>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div id="label" class="label">Front</div>
      <div id="main" class="main">â€”</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
    </div>

    <div class="footer">
      <div class="row tiny">
        <span class="pill" title="Left / Right keys">Keyboard: â† â†’</span>
        <span class="pill" title="Space to flip">Space = Flip</span>
        <span class="pill" title="S">S = Shuffle</span>
      </div>
      <div style="min-width:160px;text-align:right">
        <div id="counter" class="tiny">0 / 0</div>
        <div class="progress" aria-hidden="true"><span id="bar"></span></div>
      </div>
    </div>

    <section style="margin-top:18px">
      <details>
        <summary class="muted">Deck contents & teacher notes</summary>
        <div class="grid tiny" style="margin-top:10px">
          <div><strong>People</strong><br>teacher / å…ˆç”Ÿï¼ˆã›ã‚“ã›ã„ï¼‰<br>student / ç”Ÿå¾’ï¼ˆã›ã„ã¨ï¼‰<br>principal / æ ¡é•·å…ˆç”Ÿï¼ˆã“ã†ã¡ã‚‡ã†ã›ã‚“ã›ã„ï¼‰<br>nurse / ä¿å¥ã®å…ˆç”Ÿï¼ˆã»ã‘ã‚“ã® ã›ã‚“ã›ã„ï¼‰<br>librarian / å›³æ›¸é¤¨ã®å…ˆç”Ÿï¼ˆã¨ã—ã‚‡ã‹ã‚“ã® ã›ã‚“ã›ã„ï¼‰<br>janitor / ç”¨å‹™å“¡ã•ã‚“ï¼ˆã‚ˆã†ã‚€ã„ã‚“ã•ã‚“ï¼‰<br>counselor / ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ï¼ˆã‹ã†ã‚“ã›ã‚‰ãƒ¼ï¼‰</div>
          <div><strong>Roles</strong><br>teach / æ•™ãˆã‚‹ï¼ˆãŠã—ãˆã‚‹ï¼‰<br>help / åŠ©ã‘ã‚‹ï¼ˆãŸã™ã‘ã‚‹ï¼‰<br>clean / æƒé™¤ã™ã‚‹ï¼ˆãã†ã˜ã™ã‚‹ï¼‰<br>manage / ç®¡ç†ã™ã‚‹ï¼ˆã‹ã‚“ã‚Šã™ã‚‹ï¼‰<br>guide / æŒ‡å°ã™ã‚‹ï¼ˆã—ã©ã†ã™ã‚‹ï¼‰</div>
          <div><strong>Tips</strong><br>
            â€¢ Start in <em>Vocab: ğŸ‡¯ğŸ‡µâ†’ğŸ‡¬ğŸ‡§</em> for recognition.<br>
            â€¢ Switch to <em>Sentences</em> for controlled output.<br>
            â€¢ Finish in <em>Q & A</em> for freer output & pair work.<br>
            â€¢ Toggle â€œShow Simple Japaneseâ€ for support.<br>
          </div>
        </div>
      </details>
    </section>
  </div>

  <script>
    // Data ------------------------------------------------------------------
    const PEOPLE = [
      { en: 'teacher',   ja: 'å…ˆç”Ÿ',         hira: 'ã›ã‚“ã›ã„' },
      { en: 'student',   ja: 'ç”Ÿå¾’',         hira: 'ã›ã„ã¨' },
      { en: 'principal', ja: 'æ ¡é•·å…ˆç”Ÿ',     hira: 'ã“ã†ã¡ã‚‡ã†ã›ã‚“ã›ã„' },
      { en: 'nurse',     ja: 'ä¿å¥ã®å…ˆç”Ÿ',   hira: 'ã»ã‘ã‚“ã® ã›ã‚“ã›ã„' },
      { en: 'librarian', ja: 'å›³æ›¸é¤¨ã®å…ˆç”Ÿ', hira: 'ã¨ã—ã‚‡ã‹ã‚“ã® ã›ã‚“ã›ã„' },
      { en: 'janitor',   ja: 'ç”¨å‹™å“¡ã•ã‚“',   hira: 'ã‚ˆã†ã‚€ã„ã‚“ã•ã‚“' },
      { en: 'counselor', ja: 'ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼', hira: 'ã‹ã†ã‚“ã›ã‚‰ãƒ¼' },
    ];

    const ROLES = [
      { en: 'teach',  ja: 'æ•™ãˆã‚‹',   hira: 'ãŠã—ãˆã‚‹' },
      { en: 'help',   ja: 'åŠ©ã‘ã‚‹',   hira: 'ãŸã™ã‘ã‚‹' },
      { en: 'clean',  ja: 'æƒé™¤ã™ã‚‹', hira: 'ãã†ã˜ã™ã‚‹' },
      { en: 'manage', ja: 'ç®¡ç†ã™ã‚‹', hira: 'ã‹ã‚“ã‚Šã™ã‚‹' },
      { en: 'guide',  ja: 'æŒ‡å°ã™ã‚‹', hira: 'ã—ã©ã†ã™ã‚‹' },
    ];

    // Sentences (EN, JA, hira) ---------------------------------------------
    const SENTENCES = [
      { en: 'The teacher teaches math.',             ja: 'å…ˆç”Ÿã¯æ•°å­¦ã‚’æ•™ãˆã¾ã™ã€‚',               hira: 'ã›ã‚“ã›ã„ã¯ ã™ã†ãŒãã‚’ ãŠã—ãˆã¾ã™ã€‚' },
      { en: 'Students listen to the teacher.',       ja: 'ç”Ÿå¾’ãŸã¡ã¯å…ˆç”Ÿã®è©±ã‚’èãã¾ã™ã€‚',       hira: 'ã›ã„ã¨ãŸã¡ã¯ ã›ã‚“ã›ã„ã® ã¯ãªã—ã‚’ ããã¾ã™ã€‚' },
      { en: 'The principal manages the school.',     ja: 'æ ¡é•·å…ˆç”Ÿã¯å­¦æ ¡ã‚’ç®¡ç†ã—ã¾ã™ã€‚',         hira: 'ã“ã†ã¡ã‚‡ã†ã›ã‚“ã›ã„ã¯ ãŒã£ã“ã†ã‚’ ã‹ã‚“ã‚Šã—ã¾ã™ã€‚' },
      { en: 'The nurse helps sick students.',        ja: 'ä¿å¥ã®å…ˆç”Ÿã¯å…·åˆãŒæ‚ªã„ç”Ÿå¾’ã‚’åŠ©ã‘ã¾ã™ã€‚', hira: 'ã»ã‘ã‚“ã® ã›ã‚“ã›ã„ã¯ ãã‚ã„ãŒ ã‚ã‚‹ã„ ã›ã„ã¨ã‚’ ãŸã™ã‘ã¾ã™ã€‚' },
      { en: 'The librarian gives books to students.',ja: 'å›³æ›¸é¤¨ã®å…ˆç”Ÿã¯ç”Ÿå¾’ã«æœ¬ã‚’è²¸ã—ã¾ã™ã€‚',     hira: 'ã¨ã—ã‚‡ã‹ã‚“ã® ã›ã‚“ã›ã„ã¯ ã›ã„ã¨ã« ã»ã‚“ã‚’ ã‹ã—ã¾ã™ã€‚' },
      { en: 'The janitor cleans the school.',        ja: 'ç”¨å‹™å“¡ã•ã‚“ã¯å­¦æ ¡ã‚’æƒé™¤ã—ã¾ã™ã€‚',         hira: 'ã‚ˆã†ã‚€ã„ã‚“ã•ã‚“ã¯ ãŒã£ã“ã†ã‚’ ãã†ã˜ã—ã¾ã™ã€‚' },
      { en: 'The counselor guides students.',        ja: 'ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã¯ç”Ÿå¾’ãŸã¡ã‚’æŒ‡å°ã—ã¾ã™ã€‚',   hira: 'ã‹ã†ã‚“ã›ã‚‰ãƒ¼ã¯ ã›ã„ã¨ãŸã¡ã‚’ ã—ã©ã†ã—ã¾ã™ã€‚' },
    ];

    // Q & A deck -------------------------------------------------------------
    const QA = [
      {
        q_en: 'What does the teacher do?',
        q_ja: 'å…ˆç”Ÿã¯ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ',
        q_hira: 'ã›ã‚“ã›ã„ã¯ ãªã«ã‚’ ã—ã¾ã™ã‹ï¼Ÿ',
        a_en: 'The teacher teaches math.',
        a_ja: 'å…ˆç”Ÿã¯æ•°å­¦ã‚’æ•™ãˆã¾ã™ã€‚',
        a_hira: 'ã›ã‚“ã›ã„ã¯ ã™ã†ãŒãã‚’ ãŠã—ãˆã¾ã™ã€‚',
      },
      {
        q_en: 'Who helps you in the library?',
        q_ja: 'å›³æ›¸é¤¨ã§ã¯èª°ãŒæ‰‹ä¼ã£ã¦ãã‚Œã¾ã™ã‹ï¼Ÿ',
        q_hira: 'ã¨ã—ã‚‡ã‹ã‚“ã§ã¯ ã ã‚ŒãŒ ã¦ã¤ã ã£ã¦ ãã‚Œã¾ã™ã‹ï¼Ÿ',
        a_en: 'The librarian gives books to students.',
        a_ja: 'å›³æ›¸é¤¨ã®å…ˆç”Ÿã¯ç”Ÿå¾’ã«æœ¬ã‚’è²¸ã—ã¾ã™ã€‚',
        a_hira: 'ã¨ã—ã‚‡ã‹ã‚“ã® ã›ã‚“ã›ã„ã¯ ã›ã„ã¨ã« ã»ã‚“ã‚’ ã‹ã—ã¾ã™ã€‚',
      },
      {
        q_en: 'What does the janitor do?',
        q_ja: 'ç”¨å‹™å“¡ã•ã‚“ã¯ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ',
        q_hira: 'ã‚ˆã†ã‚€ã„ã‚“ã•ã‚“ã¯ ãªã«ã‚’ ã—ã¾ã™ã‹ï¼Ÿ',
        a_en: 'The janitor cleans the school.',
        a_ja: 'ç”¨å‹™å“¡ã•ã‚“ã¯å­¦æ ¡ã‚’æƒé™¤ã—ã¾ã™ã€‚',
        a_hira: 'ã‚ˆã†ã‚€ã„ã‚“ã•ã‚“ã¯ ãŒã£ã“ã†ã‚’ ãã†ã˜ã—ã¾ã™ã€‚',
      },
      {
        q_en: 'Who manages the school?',
        q_ja: 'å­¦æ ¡ã‚’ç®¡ç†ã™ã‚‹ã®ã¯èª°ã§ã™ã‹ï¼Ÿ',
        q_hira: 'ãŒã£ã“ã†ã‚’ ã‹ã‚“ã‚Šã™ã‚‹ã®ã¯ ã ã‚Œã§ã™ã‹ï¼Ÿ',
        a_en: 'The principal manages the school.',
        a_ja: 'æ ¡é•·å…ˆç”Ÿã¯å­¦æ ¡ã‚’ç®¡ç†ã—ã¾ã™ã€‚',
        a_hira: 'ã“ã†ã¡ã‚‡ã†ã›ã‚“ã›ã„ã¯ ãŒã£ã“ã†ã‚’ ã‹ã‚“ã‚Šã—ã¾ã™ã€‚',
      },
      {
        q_en: 'Who helps the teachers?',
        q_ja: 'å…ˆç”ŸãŸã¡ã‚’åŠ©ã‘ã‚‹ã®ã¯èª°ã§ã™ã‹ï¼Ÿ',
        q_hira: 'ã›ã‚“ã›ã„ãŸã¡ã‚’ ãŸã™ã‘ã‚‹ã®ã¯ ã ã‚Œã§ã™ã‹ï¼Ÿ',
        a_en: 'The vice principal helps the teachers.',
        a_ja: 'æ•™é ­å…ˆç”Ÿã¯å…ˆç”ŸãŸã¡ã‚’åŠ©ã‘ã¾ã™ã€‚',
        a_hira: 'ãã‚‡ã†ã¨ã†ã›ã‚“ã›ã„ã¯ ã›ã‚“ã›ã„ãŸã¡ã‚’ ãŸã™ã‘ã¾ã™ã€‚',
      },
      {
        q_en: 'Who makes our lunch?',
        q_ja: 'ç§ãŸã¡ã®æ˜¼ã”ã¯ã‚“ã‚’ä½œã‚‹ã®ã¯èª°ã§ã™ã‹ï¼Ÿ',
        q_hira: 'ã‚ãŸã—ãŸã¡ã® ã²ã‚‹ã”ã¯ã‚“ã‚’ ã¤ãã‚‹ã®ã¯ ã ã‚Œã§ã™ã‹ï¼Ÿ',
        a_en: 'The school lunch staff makes our lunch.',
        a_ja: 'çµ¦é£Ÿã®ã‚¹ã‚¿ãƒƒãƒ•ã¯ç§ãŸã¡ã®æ˜¼ã”ã¯ã‚“ã‚’ä½œã‚Šã¾ã™ã€‚',
        a_hira: 'ãã‚…ã†ã—ã‚‡ãã® ã™ãŸã£ãµã¯ ã‚ãŸã—ãŸã¡ã® ã²ã‚‹ã”ã¯ã‚“ã‚’ ã¤ãã‚Šã¾ã™ã€‚',
      },
      {
        q_en: 'Who answers the phone?',
        q_ja: 'é›»è©±ã«å‡ºã‚‹ã®ã¯èª°ã§ã™ã‹ï¼Ÿ',
        q_hira: 'ã§ã‚“ã‚ã« ã§ã‚‹ã®ã¯ ã ã‚Œã§ã™ã‹ï¼Ÿ',
        a_en: 'The office worker answers the phone.',
        a_ja: 'äº‹å‹™ã®äººã¯é›»è©±ã«å‡ºã¾ã™ã€‚',
        a_hira: 'ã˜ã‚€ã® ã²ã¨ã¯ ã§ã‚“ã‚ã« ã§ã¾ã™ã€‚',
      },
    ];

    // State -----------------------------------------------------------------
    let deck = []; // active deck
    let index = 0;
    let showingFront = true; // front/back state for flip

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      showHira: document.getElementById('showHira'),
    };

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}
      return arr;
    }

    function setHash(){
      // Persist mode & index in URL for easy classroom syncing
      location.hash = `#${els.mode.value}:${index}`;
    }

    function readHash(){
      const h = location.hash.replace('#','');
      if(!h) return;
      const [m, i] = h.split(':');
      if(m && [...els.mode.options].some(o=>o.value===m)) els.mode.value = m;
      if(i && !Number.isNaN(+i)) index = Math.max(0, Math.min(deck.length-1, +i));
    }

    function buildDeck(){
      const mode = els.mode.value;
      if(mode.startsWith('vocab')){
        const base = PEOPLE;
        deck = base.map(x=>({
          type:'vocab',
          front: mode==='vocab-j2e' ? x.ja : x.en,
          back:  mode==='vocab-j2e' ? x.en : x.ja,
          hira: x.hira,
          sideLabelFront: mode==='vocab-j2e' ? 'Japanese â†’ English' : 'English â†’ Japanese',
          sideLabelBack:  mode==='vocab-j2e' ? 'English' : 'Japanese',
        }));
      } else if(mode==='sentences'){
        deck = SENTENCES.map(s=>({
          type:'sentence',
          front: s.ja,
          back: s.en,
          hira: s.hira,
          sideLabelFront: 'Japanese sentence',
          sideLabelBack: 'English',
        }));
      } else if(mode==='qa'){
        deck = QA.map(q=>({
          type:'qa',
          front: q.q_ja,
          back: q.a_en + '\\n' + q.a_ja,
          hira: q.q_hira + '\\n' + q.a_hira,
          sideLabelFront: 'Question (JA)',
          sideLabelBack: 'Answer (EN + JA)',
        }));
      }
      index = 0; showingFront = true; render();
    }

    function render(){
      if(deck.length===0){ els.main.textContent='â€”'; els.sub.textContent='No cards'; els.counter.textContent='0 / 0'; return; }
      const item = deck[index];
      els.label.textContent = showingFront ? item.sideLabelFront : item.sideLabelBack;
      const content = showingFront ? item.front : item.back;
      if((!showingFront) && item.type==='qa' && content.includes('\\n')){
        const [en, ja] = content.split('\\n');
        els.main.innerHTML = `<div style="font-size:22px;font-weight:700">${en}</div><div class="sub" style="margin-top:8px">${ja}</div>`;
      } else {
        els.main.textContent = content;
      }
      if(els.showHira.checked){
        els.hira.classList.remove('hidden');
        els.hira.textContent = item.hira || '';
      } else {
        els.hira.classList.add('hidden');
      }
      els.sub.textContent = 'Tap / Space to flip Â· Swipe / â† â†’ to navigate';
      els.counter.textContent = `${index+1} / ${deck.length}`;
      els.bar.style.width = `${((index+1)/deck.length)*100}%`;
      setHash();
    }

    function prev(){ index = (index-1+deck.length)%deck.length; showingFront=true; render(); }
    function next(){ index = (index+1)%deck.length; showingFront=true; render(); }
    function flip(){ showingFront = !showingFront; render(); }

    // Events ----------------------------------------------------------------
    els.mode.addEventListener('change', ()=>{ buildDeck(); setHash(); });
    els.btnPrev.addEventListener('click', prev);
    els.btnNext.addEventListener('click', next);
    els.btnFlip.addEventListener('click', flip);
    els.btnShuffle.addEventListener('click', ()=>{ deck = shuffle(deck); index=0; showingFront=true; render(); });
    els.showHira.addEventListener('change', render);

    // Keyboard
    window.addEventListener('keydown', (e)=>{
      if(e.code==='ArrowLeft'){ e.preventDefault(); prev(); }
      else if(e.code==='ArrowRight'){ e.preventDefault(); next(); }
      else if(e.code==='Space'){ e.preventDefault(); flip(); }
      else if(e.key==='s' || e.key==='S'){ e.preventDefault(); deck=shuffle(deck); index=0; showingFront=true; render(); }
    });

    // Click/Touch on card to flip
    els.card.addEventListener('click', flip);

    // Swipe
    let touchStartX=null, touchStartY=null;
    els.card.addEventListener('touchstart', (e)=>{
      const t=e.changedTouches[0]; touchStartX=t.clientX; touchStartY=t.clientY;
    }, {passive:true});
    els.card.addEventListener('touchend', (e)=>{
      const t=e.changedTouches[0]; if(touchStartX===null) return;
      const dx=t.clientX - touchStartX; const dy=t.clientY - touchStartY;
      if(Math.abs(dx)>50 && Math.abs(dx)>Math.abs(dy)){
        if(dx>0) prev(); else next();
      } else if(Math.abs(dy)<10 && Math.abs(dx)<10){ flip(); }
      touchStartX=touchStartY=null;
    });

    // Init ------------------------------------------------------------------
    buildDeck();
    readHash();
    render();
  </script>
</body>
</html>
