<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boo-riculum – People at School Deck</title>
  <link rel="icon" type="image/png" href="booha-ghost.png">
  <style>
    :root { --ink:#222; --muted:#444; --accent:#0b78ff; --ok:#22c55e; --bad:#ef4444; }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      color:var(--ink);
      background:url('Booha card.jpg') center/cover fixed no-repeat;
    }
    .wrap{max-width:900px;margin:0 auto;padding:16px 16px 24px;}
    header{
      display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;
      margin-bottom:12px;background:rgba(255,255,255,0.88);padding:12px 16px;
      border-radius:16px;box-shadow:0 4px 10px rgba(0,0,0,0.15)
    }
    header h1{
      font-size:18px;margin:0;font-weight:700;letter-spacing:.2px;
      background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;
      display:flex;align-items:center;gap:8px
    }
    header h1 img{height:28px;width:auto;}
    .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,button{
      background:rgba(255,255,255,0.95);color:var(--ink);border:1px solid #ccc;
      border-radius:12px;padding:10px 12px;font-size:14px;
      box-shadow:0 2px 5px rgba(0,0,0,0.08)
    }
    button{cursor:pointer;transition:transform .05s ease, background .2s}
    button:hover{background:#f0f0f0}
    button:active{transform:scale(.98)}
    .pill{border:1px solid #ccc;border-radius:999px;padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.7)}
    .card{
      user-select:none;-webkit-user-select:none;display:flex;flex-direction:column;justify-content:center;align-items:center;
      text-align:center;background:url('Booha card.jpg') center/cover no-repeat;
      border:1px solid #ccc;border-radius:24px;min-height:56vh;margin:16px auto;padding:22px 18px 28px;
      box-shadow:0 10px 40px rgba(0,0,0,.25); position:relative;
    }
    .brand{
      position:absolute;top:10px;left:12px;display:flex;gap:8px;align-items:center;
      background:rgba(255,255,255,0.85);padding:6px 10px;border-radius:12px;border:1px solid #ddd;
      box-shadow:0 2px 6px rgba(0,0,0,0.08); font-weight:800; letter-spacing:.2px;
    }
    .brand img{height:20px;width:auto}
    .brand span{background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);
      -webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .label{color:var(--muted);font-size:13px;letter-spacing:.3px;margin-bottom:8px;
      background:rgba(255,255,255,0.7);padding:4px 8px;border-radius:8px}
    .main{font-size:28px;line-height:1.25;font-weight:800;margin:8px 0 10px;
      background:rgba(255,255,255,0.86);padding:8px 12px;border-radius:12px}
    .sub{font-size:18px;opacity:.92;margin:0 0 6px;background:rgba(255,255,255,0.65);
      padding:4px 10px;border-radius:8px}
    .hira{font-size:18px;color:var(--accent);opacity:.95;background:rgba(255,255,255,0.75);
      padding:4px 10px;border-radius:8px}
    .muted{color:var(--muted)}
    .row{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    .footer{
      display:flex;align-items:center;justify-content:space-between;margin-top:8px;color:var(--muted);font-size:13px;
      background:rgba(255,255,255,0.85);padding:8px 12px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1)
    }
    .progress{height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .progress>span{display:block;height:100%;background:linear-gradient(90deg,#7dd3fc,#60a5fa,#a78bfa,#f472b6);width:0%}
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:8px}
    @media (max-width:700px){.grid{grid-template-columns:repeat(2,minmax(0,1fr));} .main{font-size:24px}}
    a{color:#0b78ff;text-decoration:none}
    .hidden{display:none}
    .options{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .optbtn{border:1px solid #ccc;border-radius:12px;padding:10px 14px;background:rgba(255,255,255,0.95);cursor:pointer}
    .optbtn.ok{background:#dcfce7;border-color:#86efac;color:#166534}
    .optbtn.bad{background:#fee2e2;border-color:#fca5a5;color:#991b1b}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1><img src="booha-ghost.png" alt="Booha ghost"> Boo-riculum – People at School</h1>
      <div class="controls">
        <select id="mode" aria-label="Mode">
          <option value="vocab-j2e">Vocab: 🇯🇵 → 🇺🇸</option>
          <option value="vocab-e2j">Vocab: 🇺🇸 → 🇯🇵</option>
          <option value="sentences">Sentences (practice)</option>
          <option value="qa">Questions (practice)</option>
          <option value="quiz">Quiz (multiple choice)</option>
        </select>
      </div>
    </header>

    <div id="card" class="card" role="button" aria-label="flashcard" tabindex="0">
      <div class="brand"><img src="booha-ghost.png" alt="Booha ghost"><span>Boo-riculum</span></div>
      <div id="label" class="label">Front</div>
      <div id="main" class="main">—</div>
      <div id="sub" class="sub muted">Tap or press Space to flip</div>
      <div id="hira" class="hira hidden"></div>
      <div id="mcArea" class="options hidden"></div>
    </div>

    <div class="footer">
      <div class="row">
        <span class="pill" title="Left / Right keys">Keyboard: ← →</span>
        <span class="pill" title="Space to flip">Space = Flip</span>
        <button id="btnPrev" title="← or swipe right">◀︎ Prev</button>
        <button id="btnFlip" title="Tap / Space">Flip</button>
        <button id="btnNext" title="→ or swipe left">Next ▶︎</button>
        <button id="btnShuffle" title="Shuffle deck">Shuffle</button>
      </div>
      <div style="min-width:180px;text-align:right">
        <div id="counter" class="muted">0 / 0</div>
        <div class="progress" aria-hidden="true"><span id="bar"></span></div>
      </div>
    </div>
  </div>

  <script>
    // ---------------- Data ----------------
    const PEOPLE = [
      { en: 'teacher',   ja: '先生',           hira: 'せんせい' },
      { en: 'student',   ja: '生徒',           hira: 'せいと' },
      { en: 'principal', ja: '校長先生',       hira: 'こうちょうせんせい' },
      { en: 'nurse',     ja: '保健の先生',     hira: 'ほけんの せんせい' },
      { en: 'librarian', ja: '図書館の先生',   hira: 'としょかんの せんせい' },
      { en: 'janitor',   ja: '用務員さん',     hira: 'ようむいんさん' },
      { en: 'counselor', ja: 'カウンセラー',   hira: 'かうんせらー' },
      { en: 'vice principal', ja: '教頭先生',  hira: 'きょうとうせんせい' },
      { en: 'office worker',  ja: '事務の人',  hira: 'じむの ひと' },
      { en: 'lunch staff',    ja: '給食のスタッフ', hira: 'きゅうしょくの すたっふ' },
    ];

    const ROLES = [
      { en: 'teach',   ja: '教える',    hira: 'おしえる' },
      { en: 'help',    ja: '助ける',    hira: 'たすける' },
      { en: 'clean',   ja: '掃除する',  hira: 'そうじする' },
      { en: 'manage',  ja: '管理する',  hira: 'かんりする' },
      { en: 'guide',   ja: '指導する',  hira: 'しどうする' },
      { en: 'write',   ja: '書く',      hira: 'かく' },
      { en: 'read',    ja: '読む',      hira: 'よむ' },
      { en: 'talk',    ja: '話す',      hira: 'はなす' },
      { en: 'check',   ja: 'はかる',    hira: 'はかる' },
      { en: 'organize',ja: '整理する',  hira: 'せいりする' },
      { en: 'open',    ja: '開ける',    hira: 'あける' },
      { en: 'listen',  ja: '聞く',      hira: 'きく' },
      { en: 'serve',   ja: '出す',      hira: 'だす' },
      { en: 'answer',  ja: '出る',      hira: 'でる' },
    ];

    const SENTENCES = [
      { en: 'The teacher teaches math.', ja: '先生は数学を教えます。', hira: 'せんせいは すうがくを おしえます。' },
      { en: 'Students listen to the teacher.', ja: '生徒たちは先生の話を聞きます。', hira: 'せいとたちは せんせいの はなしを ききます。' },
      { en: 'The principal manages the school.', ja: '校長先生は学校を管理します。', hira: 'こうちょうせんせいは がっこうを かんりします。' },
      { en: 'The nurse helps sick students.', ja: '保健の先生は具合が悪い生徒を助けます。', hira: 'ほけんの せんせいは ぐあいが わるい せいとを たすけます。' },
      { en: 'The librarian gives books to students.', ja: '図書館の先生は生徒に本を貸します。', hira: 'としょかんの せんせいは せいとに ほんを かします。' },
      { en: 'The janitor cleans the school.', ja: '用務員さんは学校を掃除します。', hira: 'ようむいんさんは がっこうを そうじします。' },
      { en: 'The counselor guides students.', ja: 'カウンセラーは生徒たちを指導します。', hira: 'かうんせらーは せいとたちを しどうします。' },
      { en: 'The vice principal helps the teachers.', ja: '教頭先生は先生たちを助けます。', hira: 'きょうとうせんせいは せんせいたちを たすけます。' },
      { en: 'The school lunch staff makes our lunch.', ja: '給食のスタッフは私たちの昼ごはんを作ります。', hira: 'きゅうしょくの すたっふは わたしたちの ひるごはんを つくります。' },
      { en: 'The office worker answers the phone.', ja: '事務の人は電話に出ます。', hira: 'じむの ひとは でんわに でます。' },
    ];

    const QA = [
      { q_en:'What does the teacher do?', q_ja:'先生は何をしますか？', q_hira:'せんせいは なにを しますか？',
        a_en:'The teacher teaches math.', a_ja:'先生は数学を教えます。', a_hira:'せんせいは すうがくを おしえます。' }
    ];

    const QUIZ = [
      { cloze:'The teacher ___ math.', answers:['teaches'], ja:'先生は数学を教えます。', hira:'せんせいは すうがくを おしえます。', full:'The teacher teaches math.' },
      { cloze:'Students ___ to the teacher.', answers:['listen'], ja:'生徒たちは先生の話を聞きます。', hira:'せいとたちは せんせいの はなしを ききます。', full:'Students listen to the teacher.' }
    ];

    // -------------- State --------------
    let deck = [];
    let index = 0;
    let showingFront = true;

    const els = {
      mode: document.getElementById('mode'),
      card: document.getElementById('card'),
      label: document.getElementById('label'),
      main: document.getElementById('main'),
      sub: document.getElementById('sub'),
      hira: document.getElementById('hira'),
      counter: document.getElementById('counter'),
      bar: document.getElementById('bar'),
      btnPrev: document.getElementById('btnPrev'),
      btnNext: document.getElementById('btnNext'),
      btnFlip: document.getElementById('btnFlip'),
      btnShuffle: document.getElementById('btnShuffle'),
      mcArea: document.getElementById('mcArea'),
    };

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}
      return arr;
    }

    const ALL_QUIZ_WORDS = Array.from(new Set(QUIZ.flatMap(q => q.answers.map(a=>a.toLowerCase()))));

    function mcOptionsFor(item, n=4){
      const corrects = item.answers.map(a=>a.toLowerCase());
      const pool = ALL_QUIZ_WORDS.filter(v => !corrects.includes(v));
      shuffle(pool);
      return shuffle([corrects[0], ...pool.slice(0,n-1)]);
    }

    function buildDeck(){
      const mode = els.mode.value;
      if(mode==='quiz'){
        deck = QUIZ.map(q=>({
          type:'quiz',
          front:q.cloze,
          back:q.full+'\\n'+q.ja,
          hira:q.hira,
          answers:q.answers,
          choices:mcOptionsFor(q,4),
          sideLabelFront:'Choose the missing word',
          sideLabelBack:'Answer'
        }));
      } else {
        deck = PEOPLE;
      }
      index=0; showingFront=true; render();
    }

    function render(){
      if(deck.length===0){els.main.textContent='—'; return;}
      const item=deck[index];
      els.label.textContent=showingFront?item.sideLabelFront:item.sideLabelBack;
      els.main.textContent=showingFront?item.front:item.back;
      els.hira.textContent=showingFront?item.hira:'';

      if(item.type==='quiz' && showingFront){
        els.mcArea.classList.remove('hidden');
        els.mcArea.innerHTML='';
        item.choices.forEach(opt=>{
          const btn=document.createElement('button');
          btn.className='optbtn';
          btn.textContent=opt;
          btn.addEventListener('click',e=>{
            e.preventDefault();
            const norm=s=>s.toLowerCase().trim();
            const isCorrect=item.answers.map(a=>norm(a)).includes(norm(opt));
            if(isCorrect){
              btn.classList.add('ok');
              [...els.mcArea.querySelectorAll('button')].forEach(b=>b.disabled=true);
              setTimeout(()=>{showingFront=false;render();},350);
            } else {
              btn.classList.add('bad');
              btn.disabled=true;
            }
          });
          els.mcArea.appendChild(btn);
        });
      } else {
        els.mcArea.classList.add('hidden');
        els.mcArea.innerHTML='';
      }
    }

    buildDeck();
  </script>
</body>
</html>
